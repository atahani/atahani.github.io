<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>بلاگ احمد طحانی</title>
    <link>http://atahani.com/tags/front_end/index.xml</link>
    <description>Recent content on بلاگ احمد طحانی</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>fa</language>
    <copyright>Ahmad Tahani</copyright>
    <atom:link href="http://atahani.com/tags/front_end/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>راه‌حلی برای مشکلات npm</title>
      <link>http://atahani.com/npm_private_server</link>
      <pubDate>Wed, 29 Jun 2016 20:09:42 +0430</pubDate>
      
      <guid>http://atahani.com/npm_private_server</guid>
      <description>&lt;p align=&#34;justify&#34;&gt;
  هفته پیش برای جلسه دوم کارگاه داکر (همایش آزاد رایانش ابری) یک نمونه پروژه باحال درست کردم، سمت کاربر با &lt;code&gt;Reacjs&lt;/code&gt; نوشته شده بود، بعد موقعی که می‌خواستم ایمیج داکر ازش بسازم، یه عالمه پکیج &lt;code&gt;npm&lt;/code&gt; در آن استفاده شده بود که باید دوباره دانلود می‌کرد، برای دور زدن این مشکل ( با &lt;a href=&#34;https://github.com/jteeuwen/go-bindata&#34;&gt;go-bind-data&lt;/a&gt; ) از فایل باینری پروژه یک داکر ایمیج ساختم، خوب این راه‌حل خوبی به نظر می‌رسد چرا چون حجم ایمیج خیلی کم شد (چیزی حدود ۱۱ مگ) ! ولی مشکلی که هست در بحث &lt;a href=&#34;https://en.wikipedia.org/wiki/Continuous_integration&#34;&gt;Continuous integration&lt;/a&gt; باید کل پروژه به صورت اتوماتیک ساخته شده، تست و اجرا شود و در صورت اوکی بودن، باینری آن تولید و بعد ایمیج آن ساخته و به رجیستری منتقل و اجرا شود.
&lt;/p&gt;


&lt;p&gt;&lt;p align=&#34;justify&#34;&gt;
  از این بحث‌ها که بگذریم، مشکل گرفتن ماژول‌های &lt;code&gt;npm&lt;/code&gt; چه در &lt;code&gt;CI&lt;/code&gt; و چه به صورت &lt;code&gt;local&lt;/code&gt; در ایران عزیزمون به خاطر بحث فیلتر‌نت همیشگی بوده، بهترین راه‌حل موجود این است که شما یک &lt;code&gt;NPM cach server&lt;/code&gt; ایجاد کنید، خوشبختانه راه اندازی چنین سرویسی برای خودتان خیلی ساده‌ست، مخصوصاً‌ با داکر 👊
&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;&lt;p align=&#34;justify&#34;&gt;
  اول باید تصمیم بگیرید می‌خواهید این کش سرور کجا باشد، هر جایی که باشد مزایای خودش رو دارد، مثلاً برای شرکت‌هایی که چندین توسعه‌دهنده دارند بهترین راه این است که یک کش سرور روی سرور داخلی شرکت بیارند بالا، و بعد روی یکی از سرورهای خارج ایران هم یک کش سرور دیگه‌ای بیاورند بالا تا کش سرور داخلی به آن وصل بشود، این جوری دیگه به کل مشکل دریافت ماژول‌های &lt;code&gt;npm&lt;/code&gt; در شرکت حل خواهد شد، برای مصارف شخصی نیز اگه یه سرور شخصی دارید سه سوت با داکر کش سرور رو بیارید بالا و ازش استفاده کنید 😎
&lt;/p&gt;
&lt;/p&gt;

&lt;p&gt;&lt;p align=&#34;justify&#34;&gt;
  آقای &lt;a href=&#34;http://keyvanfatehi.com/&#34;&gt;کیوان فاتحی&lt;/a&gt; داکر ایمیج &lt;a href=&#34;https://www.npmjs.com/package/sinopia&#34;&gt;sinopia&lt;/a&gt; رو آماده کرده‌اند، پس در سه سوت می‌شه با داکر روی سرور آورد بالا 😊
&lt;/p&gt;
&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;docker run --name sinopia -d -p 4873:4873 keyvanfatehi/sinopia:latest
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;p align=&#34;justify&#34;&gt;
  بعد در ترمینال کلاینت برای ست کردن رجیستری
&lt;/p&gt;
&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;npm set registry http://SERVER_IP_ADDRESS:4873
&lt;/code&gt;&lt;/pre&gt;

&lt;p align=&#34;justify&#34;&gt;
  &lt;p&gt;حالا هنگام دریافت ماژول‌های &lt;code&gt;npm&lt;/code&gt; اگر قبلاً ماژول مورد نظر داخل سرور بود، از آنجا دریافت می‌کنید اگه هم نبود اول خودش سریع می‌گیره و بعد به سیستم شما انتقال می‌دهد ! چی از این راحت‌تر و بهتر 😬&lt;/p&gt;

&lt;/p&gt;


&lt;p align=&#34;justify&#34;&gt;
  راستی با استفاده از این روش می‌توانید ماژول‌های خصوصی &lt;code&gt;npm&lt;/code&gt; نیز داشته باشید، برای اطلاعات بیشتر می‌توانید به &lt;a href=&#34;https://github.com/kfatehi/docker-sinopia&#34;&gt;مخزن&lt;/a&gt; آن مراجعه کنید.
&lt;/p&gt;

</description>
    </item>
    
  </channel>
</rss>